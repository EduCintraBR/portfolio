---
import type { ui, experienceData } from '../i18n/data';

interface Props {
    content: typeof ui.en;
    jobs: typeof experienceData.en;
}

const { content, jobs } = Astro.props;
---
<section id="experience" class="py-24 scroll-mt-16">
    <div class="flex items-center gap-3 mb-12">
        <span class="font-mono text-[10px] text-accent uppercase tracking-widest">{content['experience.title']}</span>
        <div class="h-px w-12 bg-accent/30"></div>
    </div>

    <div class="mb-12">
        <h2 class="font-display font-bold text-[clamp(28px,4vw,46px)] leading-[1.1] tracking-tight text-text mb-4">
            {content['experience.h2']} <br class="hidden md:block">{content['experience.h2.br']}
        </h2>
        <p class="font-body font-light text-text2 text-[15px] max-w-2xl">
            {content['experience.desc']}
        </p>
    </div>

    <!-- Timeline Container -->
    <div class="relative pl-8 md:pl-0">
        <!-- Vertical Line -->
        <div class="absolute left-0 md:left-[50%] top-0 bottom-0 w-px bg-gradient-to-b from-accent via-border to-transparent md:-translate-x-1/2"></div>

        {jobs.map((job, index) => (
            <div class="relative mb-16 md:grid md:grid-cols-2 md:gap-16 group">
                {/* Desktop View - Alternating Layout Logic would go here but keeping it simple for loop */}
                <div class={`hidden md:block ${index % 2 === 0 ? 'text-right self-start pt-1' : 'md:col-start-2 text-left self-start pt-1'}`}>
                    <span class="font-mono text-[11px] text-accent uppercase tracking-widest block mb-1">{job.date}</span>
                    <h3 class="font-display font-bold text-xl text-text">{job.company}</h3>
                    <p class="font-body text-sm text-text2 mt-2">{job.role}</p>
                </div>
                
                {/* Marker */}
                <div class="absolute left-[-32px] md:left-1/2 md:-translate-x-1/2 top-1.5 flex items-center justify-center">
                    {index === 0 ? (
                         <div class="w-3 h-3 rounded-full bg-accent shadow-[0_0_12px_rgba(0,229,204,0.6)]"></div>
                    ) : (
                        <div class="w-2.5 h-2.5 rounded-full bg-surface border border-text3 group-hover:border-accent group-hover:bg-accent transition-colors"></div>
                    )}
                </div>

                <div class={`${index % 2 === 0 ? 'md:col-start-2' : 'md:col-start-1 md:row-start-1 md:text-right'} pt-1 pb-8`}>
                    {/* Mobile Header */}
                    <div class="md:hidden mb-4">
                        <span class="font-mono text-[11px] text-accent uppercase tracking-widest block mb-1">{job.date}</span>
                        <h3 class="font-display font-bold text-xl text-text">{job.company}</h3>
                        <p class="font-body text-sm text-text2">{job.role}</p>
                    </div>

                    <p class="font-body font-light text-text2 text-[15px] leading-relaxed mb-6">
                        {job.desc}
                    </p>
                    <div class={`flex flex-wrap ${index % 2 !== 0 ? 'md:justify-end' : ''} gap-2`}>
                        {job.tags.map(tag => (
                            <span class="px-2 py-1 bg-surface border border-surface2 text-text3 text-[9px] font-mono uppercase tracking-wide rounded-[2px]">{tag}</span>
                        ))}
                    </div>
                </div>
            </div>
        ))}
    </div>
</section>
